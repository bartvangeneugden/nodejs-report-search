var ScalaReader = require('../app/util/scalatest.js')
describe('jasmine-node', function(){

	it("Should export a ScalaTest scenario from a report", function(){
		var result = ScalaReader.getScenario(testFile);
		expect(result[0].scope).toEqual("stubbed companyweb");
		expect(result[0].given).toEqual("should sucessfully book a trip");
		expect(result[0].steps.length).toEqual(8);
	});
	
	it("Should recognize a scenario if it contains a keyword", function(){
		expect(ScalaReader.htmlContainsKeyword(testFile, "TripPreferences")).toBe(true);
		expect(ScalaReader.htmlContainsKeyword(testFile, "companyweb")).toBe(true);
		expect(ScalaReader.htmlContainsKeyword(testFile, "Vangeneugden")).toBe(false);
	});
});
var testFile = "\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<!DOCTYPE html\r\n  PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Strict\/\/EN\"\r\n  \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-strict.dtd\">\r\n<html>\r\n      <head>\r\n        <title>ScalaTest Suite com.mycompany.checkout.stub.CompanyWebCKOAcceptanceSpec Results<\/title>\r\n        <meta http-equiv=\"Content-Type\" content=\"text\/html; charset=utf-8\"\/>\r\n        <meta http-equiv=\"Expires\" content=\"-1\"\/>\r\n        <meta http-equiv=\"Pragma\" content=\"no-cache\"\/>\r\n        <link href=\"css\/styles.css\" rel=\"stylesheet\"\/>\r\n        \r\n        <script type=\"text\/javascript\">\r\n          function toggleDetails(contentId, linkId) {\r\n  var ele = document.getElementById(contentId);\r\n  var text = document.getElementById(linkId);\r\n  if(ele.style.display == \"block\") {\r\n    ele.style.display = \"none\";\r\n    text.innerHTML = \"(Show Details)\";\r\n  }\r\n  else {\r\n    ele.style.display = \"block\";\r\n    text.innerHTML = \"(Hide Details)\";\r\n  }\r\n}\r\nfunction hideOpenInNewTabIfRequired() {\r\n  if (top === self) { document.getElementById(\'printlink\').style.display = \'none\'; }\r\n}\r\n\r\n        <\/script>\r\n      <\/head>\r\n      <body class=\"specification\">\r\n        <div id=\"suite_header_name\">CompanyWebCKOAcceptanceSpec<\/div>\r\n        <div id=\"suite_header_statistic_passed\">\r\n          Tests: total 1, succeeded 1, failed 0, canceled 0, ignored 0, pending 0\r\n        <\/div>\r\n        <div id=\"a37e8220-ec2c-4510-95c9-b0dd90475f74\" class=\"scope\" style=\"margin-left: 0px;\">\r\n      stubbed companyweb\r\n    <\/div><div id=\"2d71c512-cbdd-49c6-9baa-1cba8d243f99\" class=\"test_passed\" style=\"margin-left: 0px;\">\r\n      <dl>\r\n        <dt>should sucessfully book a trip<\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"c19c37a9-9e68-4206-95e7-825d8827c9a3\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>Given A stubbed flight <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"69bd32b2-86d5-4583-9c0f-0f4180486670\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>When Going to TripPreferences Page <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"c07d9c02-4e87-4990-865e-3bc5c8346aef\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>Then TripPreferences Page should be displayed <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"69e13bb0-b86f-4e61-b1f7-bf1031ddb099\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>When Submit TripPreferences page <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"9a272f24-b144-43fb-8e07-c4c0ff76b2e4\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>Then Payments Page should be displayed <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"12542559-1b67-4e70-8d68-603dcabb87a6\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>Given Payments form has been filled <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"64ff9502-1c4b-413d-b577-58d7e176ab4e\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>When Submit Payments page <\/dt>\r\n      <\/dl>\r\n    <\/div><div id=\"79bd8d96-dd03-42ec-aaf4-73e4ce4a2884\" class=\"info\" style=\"margin-left: 15px;\">\r\n      <dl>\r\n        <dt>Then Confirmation Page should be displayed <\/dt>\r\n      <\/dl>\r\n    <\/div>\r\n        <table id=\"suite_footer\">\r\n          <tr id=\"suite_footer_id\">\r\n            <td id=\"suite_footer_id_label_passed\">Suite ID<\/td>\r\n            <td id=\"suite_footer_id_value\" colspan=\"5\">com.mycompany.checkout.stub.CompanyWebCKOAcceptanceSpec<\/td>\r\n          <\/tr>\r\n          <tr id=\"suite_footer_class\">\r\n            <td id=\"suite_footer_class_label_passed\">Class name<\/td>\r\n            <td id=\"suite_footer_class_value\" colspan=\"5\">com.mycompany.checkout.stub.CompanyWebCKOAcceptanceSpec<\/td>\r\n          <\/tr>\r\n          <tr id=\"suite_footer_duration\">\r\n            <td id=\"suite_footer_duration_label_passed\">Total duration<\/td>\r\n            <td id=\"suite_footer_duration_value\" colspan=\"2\">\r\n              1 minute, 19 seconds\r\n              <\/td>\r\n          <\/tr>\r\n        <\/table>\r\n           <div id=\"printlink\">(<a href=\"com.company.checkout.stub.CompanyWebCKOAcceptanceSpec.html\" target=\"_blank\">Open CompanyWebCKOAcceptanceSpec in new tab<\/a>)<\/div>\r\n      <\/body>\r\n      <script type=\"text\/javascript\">\r\n        hideOpenInNewTabIfRequired();\r\n      <\/script>\r\n    <\/html>\r\n";